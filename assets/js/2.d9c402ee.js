(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{194:function(t,s,a){t.exports=a.p+"assets/img/1.3b795b0f.png"},195:function(t,s,a){t.exports=a.p+"assets/img/2.14082886.png"},196:function(t,s,a){t.exports=a.p+"assets/img/3.33373202.png"},197:function(t,s,a){t.exports=a.p+"assets/img/4.9b8dfaf8.jpg"},198:function(t,s,a){t.exports=a.p+"assets/img/5.5c49d18e.jpg"},199:function(t,s,a){t.exports=a.p+"assets/img/6.96cdb273.jpg"},200:function(t,s,a){t.exports=a.p+"assets/img/7.4305874d.png"},201:function(t,s,a){t.exports=a.p+"assets/img/8.7fd70360.png"},206:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:a(194)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("请求过程中一些潜在的性能优化点：")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("dns可以通过缓存，减少dns查询时间")]),t._v(" "),a("li",[t._v("网络请求的过程走最近的网络环境")]),t._v(" "),a("li",[t._v("相同的静态资源缓存")]),t._v(" "),a("li",[t._v("减少请求http请求大小")]),t._v(" "),a("li",[t._v("减少http请求")]),t._v(" "),a("li",[t._v("服务端渲染")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"资源合并与压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资源合并与压缩","aria-hidden":"true"}},[this._v("#")]),this._v(" 资源合并与压缩")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("资源合并与压缩主要就是减少http请求数量和减少请求资源大小")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("html压缩\n"),a("ul",[a("li",[t._v("nodejs提供的html-minifier")]),t._v(" "),a("li",[t._v("后端模板引擎渲染压缩")])])]),t._v(" "),a("li",[t._v("css压缩(无效代码删除, css语义合并)\n"),a("ul",[a("li",[t._v("html-minifier对html中的css进行压缩")]),t._v(" "),a("li",[t._v("clean-css对css进行压缩")])])]),t._v(" "),a("li",[t._v("js的压缩与混乱(无效字符的删除、剔除注释、代码语义的缩减和优化、代码保护)\n"),a("ul",[a("li",[t._v("html-minifier对html中的js进行压缩")]),t._v(" "),a("li",[t._v("uglifyjs2对js进行压缩")])])]),t._v(" "),a("li",[t._v("文件合并\n"),a("ul",[a("li",[t._v("文件与文件之间有插入的上行请求，增加了N-1个网络延迟")]),t._v(" "),a("li",[t._v("丢包问题影响更严重")]),t._v(" "),a("li",[t._v("经过代理服务器时可能会被断开")])])]),t._v(" "),a("li",[t._v("开启gzip")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"图片相关的优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片相关的优化","aria-hidden":"true"}},[this._v("#")]),this._v(" 图片相关的优化")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("png8/png24/png32之间的区别")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("png8 —— 256色 + 支持透明")]),this._v(" "),s("li",[this._v("png24 —— 2^24色 + 不支持透明")]),this._v(" "),s("li",[this._v("png32 —— 2^24色 + 支持透明")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("不同格式图片常用的业务场景")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("jpg有损压缩，压缩率高，不支持透明")]),this._v(" "),s("li",[this._v("png支持透明，浏览器兼容好")]),this._v(" "),s("li",[this._v("webp压缩程度更好，在ios webview有兼容性问题")]),this._v(" "),s("li",[this._v("svg矢量图，代码内嵌，相对较小，图片样式相对简单的场景")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("优化方案")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("进行图片压缩")]),t._v(" "),a("li",[t._v("CSS雪碧图(减少你的网站的HTTP请求数量)")]),t._v(" "),a("li",[t._v("Image inline(将图片的内容内嵌到html当中)")]),t._v(" "),a("li",[t._v("使用SVG进行矢量图的绘制")]),t._v(" "),a("li",[t._v("使用iconfont解决icon问题")]),t._v(" "),a("li",[t._v("在安卓下使用webp")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"懒加载与预加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#懒加载与预加载","aria-hidden":"true"}},[this._v("#")]),this._v(" 懒加载与预加载")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("懒加载")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("图片进入可视区域之后请求图片资源")]),this._v(" "),s("li",[this._v("对于电商等图片很多，页面很长的业务场景适用")]),this._v(" "),s("li",[this._v("减少无效资源的加载")]),this._v(" "),s("li",[this._v("并发加载的资源过多会阻塞JS的加载，影响网站的正常使用")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("懒加载实现原理")]),this._v("\n判断图片距离可视区顶部的距离是否小于可视区的高度，如果小于则加载图图片资源，使用lazyload时必须固定图片的宽高")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("image-list"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lazyload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("data-original")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.sanjiaoniu.com/files/1506/1-1506130ZT90-L.jpg"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" viewHeight "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight "),a("span",{attrs:{class:"token comment"}},[t._v("// 可视区高度")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("lazyload")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" eles "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelectAll")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'img[data-original][lazyload]'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  Array"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("forEach"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("call")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eles"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" rect\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("original "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("''")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    rect "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getBoundingClientRect")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rect"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bottom "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" rect"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" viewHeight"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token operator"}},[t._v("!")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" img "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Image")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        img"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("original\n        img"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          item"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" img"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        item"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("removeAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'data-original'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        item"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("removeAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'lazyload'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("lazyload")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndocument"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'scroll'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lazyload"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("预加载")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("图片等静态资源在使用之前的提前请求")]),this._v(" "),s("li",[this._v("资源使用到时能从缓存中加载，提升用户体验")]),this._v(" "),s("li",[this._v("页面展示的依赖关系维护")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("预加载的实现")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("直接使用img标签，并设置"),a("code",[t._v('style="display: none;"')])]),t._v(" "),a("li",[t._v("使用img对象"),a("code",[t._v("new Image()")])]),t._v(" "),a("li",[t._v("使用ajax（XMLHttpRequest）请求\n"),a("ul",[a("li",[t._v("优点：可以精细的控制，监听请求过去")]),t._v(" "),a("li",[t._v("缺点：不能跨域")])])]),t._v(" "),a("li",[t._v("PreloadJS库")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"重绘回流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重绘回流","aria-hidden":"true"}},[this._v("#")]),this._v(" 重绘回流")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:a(195)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("回流（Reflow）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意：")]),this._v(" "),s("p",[this._v("回流必将引起重绘，而重绘不一定会引起回流；")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("重绘（Paint）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("触发页面重布局的属性")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("盒子模型相关属性会触发重布局")]),this._v(" "),s("li",[this._v("定位属性及浮动也会触发重布局")]),this._v(" "),s("li",[this._v("改变节点内部文字结构也会触发重布局")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("width、height、padding、margin、display、border-width、border、min-height、top、bottom、left、right、position、float、clear、text-align、overflow-y、font-weight、overflow、font-family、line-height、vertival-align、white-space、font-size")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("只触发重绘的属性")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("color、border-style、border-radius、visibility、text-decoration、background、background-image、background-position、background-repeat、background-size、outline-color、outline、outline-style、outline-width、box-shadow")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("新建DOM的过程")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("获取DOM后分割为多个图层")]),t._v(" "),a("li",[t._v("对每个图层的节点计算样式结果（Recalculate style--样式重计算）")]),t._v(" "),a("li",[t._v("为每个节点生成图形和位置（Layout--回流和重布局）")]),t._v(" "),a("li",[t._v("将每个节点绘制填充到图层位图中（Paint Setup和Paint--重绘）")]),t._v(" "),a("li",[t._v("图层作为纹理上传至GPU")]),t._v(" "),a("li",[t._v("符合多个图层到页面上生成最终屏幕图像（Composite Layers--图层重组）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Chrome创建图层的条件（devtool: performance、layout）")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("3D或透视变换（perspective / transform: translateZ(0) / will-change: transform）CSS属性")]),t._v(" "),a("li",[t._v("使用加速视频解码的video节点")]),t._v(" "),a("li",[t._v("拥有3D（WebGL）上下文或加速的2D上下文的canvas节点")]),t._v(" "),a("li",[t._v("混合插件（如Flash）")]),t._v(" "),a("li",[t._v("对自己的opacity做CSS动画或使用一个动画变换的元素")]),t._v(" "),a("li",[t._v("拥有CSS过滤器的元素")]),t._v(" "),a("li",[t._v("元素有一个包含复合层的后代节点（一个元素拥有一个子元素，该子元素在自己的层里）")]),t._v(" "),a("li",[t._v("元素有一个z-index较低且包含一个复合层的兄弟元素（换句话说就是该元素在复合层上面渲染）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("实战优化点")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("用translate替代top改变")]),t._v(" "),a("li",[t._v("用opacity替代visibility")]),t._v(" "),a("li",[t._v("不要一条一条地修改 DOM 的样式，预先定义好 class，然后修改 DOM 的 className")]),t._v(" "),a("li",[t._v("把 DOM 离线后修改，比如：先把 DOM 给 display:none (有一次 Reflow)，然后你修改100次，然后再把它显示出来")]),t._v(" "),a("li",[t._v("不要把 DOM 结点的属性值放在一个循环里当成循环里的变量")]),t._v(" "),a("li",[t._v("不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局")]),t._v(" "),a("li",[t._v("动画实现的速度的选择")]),t._v(" "),a("li",[t._v("对于动画新建图层")]),t._v(" "),a("li",[t._v("启用 GPU 硬件加速")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"浏览器存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器存储","aria-hidden":"true"}},[this._v("#")]),this._v(" 浏览器存储")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie","aria-hidden":"true"}},[this._v("#")]),this._v(" Cookie")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("优点：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("因为HTTP请求无状态，所以需要cookie去维持客户端状态")]),this._v(" "),s("li",[this._v("过期时间expire")]),this._v(" "),s("li",[this._v("cookie的生成方式：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("pre",[s("code",[this._v("* http response header中的set-cookie\n* js中可以通过document.cookie可以读写cookie\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("缺点：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("仅仅作为浏览器存储，大小4KB左右，能力被localstorage代替")]),this._v(" "),s("li",[this._v("cookie在相关域名下面都会携带， cdn的流量损耗，"),s("code",[this._v("解决方法：cdn 的域名和主站域名分开")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("HttpOnly")]),this._v(" "),s("p",[this._v("如果在Cookie中设置了HttpOnly属性，那么通过js脚本将无法读取到cookie信息，这样能有效的防止XSS攻击")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"localstorage与sessionstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localstorage与sessionstorage","aria-hidden":"true"}},[this._v("#")]),this._v(" LocalStorage与SessionStorage")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("相同点：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("HTML5设计出来专门用于浏览器存储的")]),this._v(" "),s("li",[this._v("大小为5M左右")]),this._v(" "),s("li",[this._v("仅在客户端使用，不与服务端进行通信")]),this._v(" "),s("li",[this._v("接口封装较好")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("异同点：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Sessionstorage为会话级别的浏览器存储（可用于表单信息的维护）；")]),this._v(" "),s("li",[this._v("LocalStorage浏览器本地缓存的方案。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"indexdb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#indexdb","aria-hidden":"true"}},[this._v("#")]),this._v(" IndexDB")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("IndexedDB 是一种低级API，用于客户端存储大量结构化数据(包括, 文件/ blobs)。该API使用索引来实现对该数据的高性能搜索。虽然 Web Storage 对于存储较少量的数据很有用，但对于存储更大量的结构化数据来说，这种方法不太有用。IndexedDB提供了一个解决方案；")]),this._v(" "),s("li",[this._v("为应用创建离线版本。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"service-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Service Worker")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("使用拦截和处理网络请求的能力，去实现一个离线应用")]),this._v(" "),s("li",[this._v("使用Service Worker 在后台运行的同时能和页面通信的能力，去实现大规模后台数据的处理")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Service Worker 的生命周期")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:a(196)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"chrome://serviceworker-internals/",target:"_blank"}},[this._v("chrome://serviceworker-internals/")])]),this._v(" "),s("li",[s("a",{attrs:{href:"chrome://inspect/#service-workers",target:"_blank"}},[this._v("chrome://inspect/#service-workers")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("可靠 - 即使在不稳定的网络环境下，也能瞬间加载并展现")]),this._v(" "),s("li",[this._v("体验 - 快速响应，并且有平滑的动画响应用户的操作")]),this._v(" "),s("li",[this._v("粘性 - 像设备上的原生应用，具有沉浸式的用户体验，用户可以添加到桌面")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存","aria-hidden":"true"}},[this._v("#")]),this._v(" 缓存")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:a(197)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"cache-control"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cache-control","aria-hidden":"true"}},[this._v("#")]),this._v(" Cache-Control")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:a(198)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/29697651",target:"_blank"}},[s("img",{attrs:{src:a(199)}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("响应是否可复用，有的场景缓存命中率很低，就没必要设置缓存，设置 Cache-Control:no-store 指令；")]),this._v(" "),s("li",[this._v("响应可复用时，首先看客户端对数据一致性要求，强一致则需要设置Cache-Control:no-cache 指令，客户端在使用缓存的资源之前，必须先与服务器确认资源是否有变更，如果资源未被更改，可以避免下载。验证响应是否被修改，是通过请求头If-None-match和响应头ETag来实现的；")]),this._v(" "),s("li",[this._v("响应可复用时，还要考虑缓存是否能共用，Cache-Control:public 指响应可在Web代理中缓存，多个客户端可共用该响应；Cache-Control:private 指响应只缓存中客户端本地，只能自己使用；")]),this._v(" "),s("li",[this._v("最后要设置缓存过期时间，在max-age指定的时间之内，客户端不会向服务器发送任何请求，包括验证缓存是否有效的请求，也就是说，如果在这段时间之内，服务器上的资源发生了变化，那么客户端将不能感知，仍使用老版本数据。所以在设置缓存时间时，需要慎重。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("常见的组合有：")]),this._v(" "),s("ul",[s("li",[this._v("Cache-Control: private,no-cache,max-age=0")]),this._v(" "),s("li",[this._v("Cache-Control: public, max-age=7200")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"expires"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expires","aria-hidden":"true"}},[this._v("#")]),this._v(" Expires")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("缓存过期时间，用来指定资源到期的时间，是服务器端的具体时间点")]),this._v(" "),s("li",[this._v("告诉浏览器在过期时间前可以直接从浏览器缓存中读取数据，而无需再次请求")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"last-modified-if-modified-since"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#last-modified-if-modified-since","aria-hidden":"true"}},[this._v("#")]),this._v(" Last-Modified/If-Modified-Since")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("基于客户端和服务端协商的缓存机制")]),t._v(" "),a("li",[t._v("last-modified -- response header")]),t._v(" "),a("li",[t._v("if-modified-since -- request header")]),t._v(" "),a("li",[t._v("需要与cache-control共同使用")]),t._v(" "),a("li",[t._v("缺点：\n"),a("ul",[a("li",[t._v("某些服务端不能获取精确的修改时间")]),t._v(" "),a("li",[t._v("文件修改时间改了，但文件内容却没有变")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"etag-if-none-match"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#etag-if-none-match","aria-hidden":"true"}},[this._v("#")]),this._v(" Etag/If-None-Match")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("文件内容的hash值")]),this._v(" "),s("li",[this._v("Etag -- response header")]),this._v(" "),s("li",[this._v("if-none-match -- request header")]),this._v(" "),s("li",[this._v("需要与cache-control共同使用")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("分级缓存策略")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:a(200)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:a(201)}})])}],e=a(0),r=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"前端性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端性能优化","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://coding.imooc.com/class/chapter/130.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://processon.com/view/59e74772e4b05f52bada3e27",target:"_blank",rel:"noopener noreferrer"}},[t._v("思维导图"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("WEB前端本质上是一种GUI软件，本可以直接借鉴其它GUI系统架构设计方案，但WEB前端有点特别：传统的CS架构的GUI软件，是软件开发完后，将软件打包发布到相关的应用平台上，需要用户从应用平台下载到本地解压安装后使用，实际上用户在使用软件时，用户本地是在访问本地的一些资源，而WEB前端（BS架构）则是开发完后将代码发布到服务器、cdn上，用户使用时，只需要通过浏览器访问网址，而浏览器则会向远程的服务器发送请求，服务器返回相关资源，这个过程是一个动态的增量的加载相关资源；所以缩短服务器向浏览器返回数据的时间就能让客户的体验更好。")]),t._v(" "),a("p",[t._v("首先了解一下，浏览器的一个请求从发送到返回都经历了什么？\n")]),t._m(0),a("p"),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("资源压缩可以从以下几个方面着手：")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),a("p",[t._v("html 页面加载渲染的过程\n")]),t._m(24),a("p"),t._v(" "),t._m(25),t._v(" "),a("p",[t._v("当render tree中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建,这就称为回流(reflow)；当页面布局和几何属性改变时就需要回流。")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),a("p",[t._v("当render tree中的一些元素需要更新属性，而这些属性只是影响元素的外观，风格，而不会影响布局的，比如background-color，则就叫称为重绘。")]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),a("p",[t._v("具体使用方法可以查看：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2018/07/indexeddb.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器数据库 IndexedDB 入门教程"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN web docs IndexedDB"),a("OutboundLink")],1)])]),t._v(" "),t._m(54),t._v(" "),a("p",[t._v("Service Worker 是一个脚本，浏览器独立与当前网页，将其在后台运行，为实现一些不依赖页面或者用户交互的特性打开了一扇大门。在未来这些特性将包括推送消息，背景后台同步，Gepfencing(地理围栏定位)，但它将推出的第一个首要特性，就是拦截和处理网络请求的能力，包括以编程方式来管理被缓存的响应。")]),t._v(" "),t._m(55),t._v(" "),t._m(56),t._m(57),a("p"),t._v(" "),a("p",[t._v("Chrome内置的Service Worker工具：")]),t._v(" "),t._m(58),t._v(" "),a("h3",{attrs:{id:"pwa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pwa","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://lavas.baidu.com/pwa",target:"_blank",rel:"noopener noreferrer"}},[t._v("PWA"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Progressive Web App, 简称 PWA，是提升 Web App 的体验的一种新方法，能给用户原生应用的体验。")]),t._v(" "),a("p",[t._v("PWA 能做到原生应用的体验不是靠特指某一项技术，而是经过应用一些新技术进行改进，在安全、性能和体验三个方面都有很大提升，PWA 本质上是 Web App，借助一些新技术也具备了 Native App 的一些特性，兼具 Web App 和 Native App 的优点。")]),t._v(" "),a("p",[t._v("PWA 的主要特点包括下面三点：")]),t._v(" "),t._m(59),t._v(" "),a("p",[t._v("PWA 本身强调渐进式，并不要求一次性达到安全、性能和体验上的所有要求，开发者可以通过 PWA Checklist 查看现有的特征。\n"),a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=zh-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lighthouse"),a("OutboundLink")],1),t._v("这款chrome插件可以帮助你测试网站或软件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Vue")]),t._v("的PWA解决方案"),a("a",{attrs:{href:"https://lavas.baidu.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("LAVAS"),a("OutboundLink")],1)])]),t._v(" "),t._m(60),t._v(" "),a("p",[t._v("缓存是优化性能、提升体验是一个重要方案。HTTP协议里也包含了控制缓存的部分，通过Cache-Control首部字段来控制，将响应数据缓存至浏览器本地或Web代理中，以达到减少网络延迟及数据传输的开销。\n")]),t._m(61),a("p"),t._v(" "),t._m(62),t._v(" "),a("p",[t._v("可设置的属性值max-age 最大缓存时间，优先级高，s-maxage，public，private，no-cache，no-store\n")]),t._m(63),a("p"),t._v(" "),a("p",[t._v("资源的缓存策略主要还是在服务器端控制，在响应头中设置Cache-Control参数，可按下图中的维度与步骤来设计：\n")]),t._m(64),a("p"),t._v(" "),t._m(65),t._v(" "),t._m(66),t._v(" "),t._m(67),t._v(" "),t._m(68),t._v(" "),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),t._m(73),t._m(74),a("p"),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/etoah/p/5579622.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("流程图"),a("OutboundLink")],1)]),t._m(75),a("p")])},n,!1,null,null,null);r.options.__file="web-optimization.md";s.default=r.exports}}]);